# ci4_resultarray_helper
A helper for CodeIgniter 4 that makes it possible to add links to an result array to be generated by the Table Library.

## Instalation
Download "resultarray_helper.php" file and place it on "app/Helpers" folder to your CodeIgniter 4 project.

Load it whenever you need using the "helper()" function.

```php
helper('resultarray');
```

## Examples
Let's display an HTML table with the products ("id", "productname" and "price") registered in the database using the "Table Library".

```php
<?php

namespace App\Controllers;

use App\Controllers\BaseController;

class Products extends BaseController
{
    public function list()
    {
        $table = new \CodeIgniter\View\Table();
        $productModel = model('ProductModel');
        
        $productsList = $productModel->asArray()->findAll(); //fetch all products in an array var

        //set the html table heading
        $table->setHeading(['Id', 'Product Name', 'Price']);

        //Display html table
        echo $table->generate($productsList);
    }
}
```
The code above produces a html table like:
| Id | Product Name | Price |
| -- | -------------| ------|
| 1  | Notebook     | 200.00|
| 2  | Mouse        | 15.00 |
| 3  | Pendrive     | 25.00 |

However, in some cases it may be necessary to insert a new column containing, for example, a link to the "Edit" product action. For that, let's use the "add_column_link" function of "resultarray_helper".

```php
<?php

namespace App\Controllers;

use App\Controllers\BaseController;

class Products extends BaseController
{
    public function list()
    {
        $table = new \CodeIgniter\View\Table();
        $productModel = model('ProductModel');
        //load the resultarray helper
        helper('resultarray');
        
        $productsList = $productModel->asArray()->findAll(); //fetch all products in an array var

        //add a position to productList array containing the Edit link
        $productList = add_column_link($productList, 'links', [
                'href'  => base_url('products/edit'),
                'param' => 'id', //which parameter will be used in the URL (will be produced "products/edit/{id}) (E.g. products/edit/1 , products/edit/2 , etc...)
                'title' => 'Edit',
                'attr'  => 'class="btn"'
        ]);

        //set the html table heading (including the "Action" column)
        $table->setHeading(['Id', 'Product Name', 'Price', 'Action']);

        //Display html table
        echo $table->generate($productsList);
    }
}
```
Now a table will be displayed with a column containing the links for the edit action:

| Id | Product Name | Price | Action |
| -- | -------------| ------| -------|
| 1  | Notebook     | 200.00|[Edit](#)|
| 2  | Mouse        | 15.00 |[Edit](#)|
| 3  | Pendrive     | 25.00 |[Edit](#)|

You can also insert more than one link in the new column. The following code inserts the "Edit" and "Delete" links.

```php
$productList = add_column_link($productList, 'links', [
    [
        'href'  => base_url('products/edit'),
        'param' => 'id',
        'title' => 'Edit',
        'attr'  => 'class="btn"'
    ],
    [
        'href'  => base_url('products/delete'),
        'param' => 'id',
        'title' => 'Delete',
        'attr'  => 'class="btn"'
    ]
]);
```

It will present a table like:

| Id | Product Name | Price | Action |
| -- | -------------| ------| -------|
| 1  | Notebook     | 200.00|[Edit](#) [Delete](#)|
| 2  | Mouse        | 15.00 |[Edit](#) [Delete](#)|
| 3  | Pendrive     | 25.00 |[Edit](#) [Delete](#)|